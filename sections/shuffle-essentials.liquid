{% comment %}
  Shuffle Essentials Products Carousel Section
  Features: Product grid, Add to Cart buttons, View All functionality
{% endcomment %}

<section class="shuffle-essentials" id="shuffle-essentials">
  <div class="container">
    <div class="shuffle-essentials__header">
      <h2 class="shuffle-essentials__title">
        <span class="shuffle-essentials__star">✦</span>
        {{ section.settings.heading | default: 'SHUFFLE ESSENTIALS' }}
        <span class="shuffle-essentials__star">✦</span>
      </h2>
    </div>
    
    <div class="shuffle-essentials__products" id="essentials-products">
      {% assign products_to_show = section.settings.products_to_show | default: 4 %}
      {% assign essentials_products = '' | split: '' %}
      
      {% for product in collections.products %}
        {% if product.category == 'essentials' %}
          {% assign essentials_products = essentials_products | concat: product %}
        {% endif %}
      {% endfor %}
      
      {% for product in essentials_products limit: products_to_show %}
        <div class="product-card" data-product-id="{{ product.id }}">
          <div class="product-card__image-container">
            <img src="/assets/{{ product.image }}" alt="{{ product.title }}" class="product-card__image">
            <div class="product-card__overlay">
              <button class="product-card__add-to-cart btn btn--primary" data-product-id="{{ product.id }}">
                <svg class="product-card__cart-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="9" cy="21" r="1"></circle>
                  <circle cx="20" cy="21" r="1"></circle>
                  <path d="m1 1 4 4 13 0 4 13H6l-2-5H1"></path>
                </svg>
                Add to Cart
              </button>
            </div>
          </div>
          <div class="product-card__info">
            <h3 class="product-card__title">{{ product.title }}</h3>
            <p class="product-card__price">${{ product.price }} {{ product.currency }}</p>
          </div>
        </div>
      {% endfor %}
    </div>
    
    <div class="shuffle-essentials__hidden" id="hidden-products" style="display: none;">
      {% for product in essentials_products offset: products_to_show %}
        <div class="product-card" data-product-id="{{ product.id }}">
          <div class="product-card__image-container">
            <img src="/assets/{{ product.image }}" alt="{{ product.title }}" class="product-card__image">
            <div class="product-card__overlay">
              <button class="product-card__add-to-cart btn btn--primary" data-product-id="{{ product.id }}">
                <svg class="product-card__cart-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="9" cy="21" r="1"></circle>
                  <circle cx="20" cy="21" r="1"></circle>
                  <path d="m1 1 4 4 13 0 4 13H6l-2-5H1"></path>
                </svg>
                Add to Cart
              </button>
            </div>
          </div>
          <div class="product-card__info">
            <h3 class="product-card__title">{{ product.title }}</h3>
            <p class="product-card__price">${{ product.price }} {{ product.currency }}</p>
          </div>
        </div>
      {% endfor %}
    </div>
    
    <div class="shuffle-essentials__actions">
      <button class="shuffle-essentials__view-all btn btn--secondary" id="view-all-btn">
        {{ section.settings.show_all_button | default: 'VIEW ALL' }}
      </button>
    </div>
  </div>
</section>

