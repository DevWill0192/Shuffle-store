{% comment %}
  Latest Collection Section
  Features: Date filtering, product showcase, collection images
{% endcomment %}

<section class="latest-collection" id="latest-collection">
  <div class="container">
    <div class="latest-collection__header">
      <h2 class="latest-collection__title">
        <span class="latest-collection__star">✦</span>
        {{ section.settings.heading | default: 'LATEST COLLECTION' }}
        <span class="latest-collection__star">✦</span>
      </h2>
    </div>
    
    <div class="latest-collection__content">
      <div class="latest-collection__images">
        <div class="latest-collection__image-item">
          <img src="/assets/ket_club.jpg" alt="KET.CLUB Collection" class="latest-collection__image">
          <div class="latest-collection__overlay">
            <span class="latest-collection__label">KET.CLUB</span>
          </div>
        </div>
        
        <div class="latest-collection__image-item">
          <img src="/assets/shuffle_essentials.webp" alt="Shuffle Essentials Collection" class="latest-collection__image">
          <div class="latest-collection__overlay">
            <span class="latest-collection__label">Shuffle Essentials</span>
          </div>
        </div>
        
        <div class="latest-collection__image-item">
          <img src="/assets/shuffle_hoodie_purple.avif" alt="Purple Collection" class="latest-collection__image">
          <div class="latest-collection__overlay">
            <span class="latest-collection__label">Purple Collection</span>
          </div>
        </div>
      </div>
      
      <div class="latest-collection__products">
        {% assign filter_date = section.settings.filter_date | default: '2025-01-01' %}
        {% assign latest_products = '' | split: '' %}
        
        {% for product in collections.products %}
          {% if product.date_added >= filter_date %}
            {% assign latest_products = latest_products | concat: product %}
          {% endif %}
        {% endfor %}
        
        {% for product in latest_products limit: 6 %}
          <div class="product-card product-card--latest" data-product-id="{{ product.id }}">
            <div class="product-card__image-container">
              <img src="/assets/{{ product.image }}" alt="{{ product.title }}" class="product-card__image">
              <div class="product-card__overlay">
                <button class="product-card__add-to-cart btn btn--primary" data-product-id="{{ product.id }}">
                  <svg class="product-card__cart-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path d="m1 1 4 4 13 0 4 13H6l-2-5H1"></path>
                  </svg>
                  Add to Cart
                </button>
              </div>
            </div>
            <div class="product-card__info">
              <h3 class="product-card__title">{{ product.title }}</h3>
              <p class="product-card__price">${{ product.price }} {{ product.currency }}</p>
              <span class="product-card__badge">NEW</span>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>

